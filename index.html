<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark light">
    
    <!-- Load environment first -->
    <script>
        // Add global error handler for script loading
        window.handleScriptError = function(scriptSrc) {
            console.error(`Failed to load script: ${scriptSrc}`);
            const banner = document.createElement('div');
            banner.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: #ff4444;
                color: white;
                padding: 10px;
                text-align: center;
                z-index: 9999;
            `;
            banner.textContent = `⚠️ Failed to load required script: ${scriptSrc}. Please check console for details.`;
            document.body.appendChild(banner);
        };
    </script>
    
    <script src="env.js" onerror="handleScriptError('env.js')"></script>
    
    <!-- Load dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Load configuration -->
    <script src="config.js" onerror="handleScriptError('config.js')"></script>
    
    <!-- Initialize app -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Initialize configuration
                await initializeConfig();
                
                // Debug environment loading
                console.log('Environment check:', {
                    exists: !!window.env,
                    hasOpenAI: !!window.OPENAI_CONFIG?.apiKey,
                    hasSupabase: !!window.supabase
                });

                // Initialize form
                initializeAssessment();
            } catch (error) {
                console.error('Initialization error:', error);
                const banner = document.createElement('div');
                banner.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    background: #ff4444;
                    color: white;
                    padding: 10px;
                    text-align: center;
                    z-index: 9999;
                `;
                banner.textContent = `⚠️ ${error.message}`;
                document.body.appendChild(banner);
            }
        });
    </script>
    
    <!-- Load application scripts -->
    <script src="script.js"></script>
    
    <title>Cybersecurity Assessment</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <a href="https://www.etutekilab.com" target="_blank" rel="noopener">Etuteki_Lab</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <h1></h1>
            <p class="intro"></p>
            
            <div id="assessment-form">
                <!-- Progress bar and sections will be dynamically loaded here -->
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 All rights reserved.</p>
            <p class="powered-by">
                Powered by <a href="https://www.etutekilab.com" target="_blank" rel="noopener">Etuteki Lab</a>
            </p>
        </div>
    </footer>
</body>
</html> 