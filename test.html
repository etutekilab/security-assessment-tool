<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="env.js"></script>
    <script>
        async function testConnections() {
            try {
                // Wait for env to load
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Log environment
                console.log('Environment:', {
                    hasSupabaseUrl: !!window.env?.SUPABASE_URL,
                    hasSupabaseKey: !!window.env?.SUPABASE_ANON_KEY,
                    hasOpenAIKey: !!window.env?.OPENAI_API_KEY
                });
                
                // Test Supabase
                const supabase = createClient(window.env.SUPABASE_URL, window.env.SUPABASE_ANON_KEY);
                const { data, error } = await supabase.from('assessments').select('count(*)');
                
                document.body.innerHTML += `<pre>${JSON.stringify({ data, error }, null, 2)}</pre>`;
            } catch (err) {
                document.body.innerHTML += `<pre>Error: ${err.message}</pre>`;
            }
        }
        
        document.addEventListener('DOMContentLoaded', testConnections);
    </script>
</head>
<body>
    <h1>API Connection Test</h1>
</body>
</html> 